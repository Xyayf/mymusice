(function(t){function e(e){for(var a,s,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01e6":function(t,e,n){},"03ab":function(t,e,n){},"0790":function(t,e,n){"use strict";n("28b9")},1:function(t,e){},"199c":function(t,e){},2395:function(t,e,n){},"23be":function(t,e,n){"use strict";var a=n("199c"),r=n.n(a);e["default"]=r.a},"28b9":function(t,e,n){},"28eb":function(t,e,n){"use strict";n("6777")},3394:function(t,e,n){},"3b35":function(t,e,n){},"3cdd":function(t,e,n){"use strict";n("ded1")},"3dfd":function(t,e,n){"use strict";var a=n("d968"),r=n("23be"),i=(n("7c55"),n("2877")),s=Object(i["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},5578:function(t,e,n){"use strict";n("a357")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("3dfd"),i=n("8c4f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("van-sticky",{attrs:{"offset-top":0}},[n("van-search",{attrs:{"show-action":"",placeholder:t.key},on:{search:t.onSearch,input:t.onInput,clear:t.onClear},scopedSlots:t._u([{key:"action",fn:function(){return[n("div",{staticClass:"search",on:{click:function(e){return t.onSearch(t.value)}}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("van-swipe",{attrs:{autoplay:3e3}},t._l(t.banners,(function(t,e){return n("van-swipe-item",{key:e},[n("a",{attrs:{href:t.url}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imageUrl,expression:"item.imageUrl"}]})])])})),1),t.display?n("div",{staticClass:"song"},[n("ul",t._l(t.searchList,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.toplay(e.id,e.artists[0].img1v1Url)}}},[t._v(t._s(e.name))])})),0)]):t._e(),n("div",{staticClass:"hot "},[n("ul",{ref:"tochend"},[t._m(0),t._m(1),t._m(2),t._m(3)])]),n("NewMV"),n("NewMusic"),n("Footer")],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{attrs:{href:""}},[n("img",{attrs:{src:"http://pay.91yunshi.com/share/html/userTextImg/home1.png",alt:"mei"}}),n("p",[t._v("每日推荐")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{attrs:{href:""}},[n("img",{attrs:{src:"http://pay.91yunshi.com/share/html/userTextImg/home1.png",alt:"mei"}}),n("p",[t._v("每日推荐")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{attrs:{href:""}},[n("img",{attrs:{src:"http://pay.91yunshi.com/share/html/userTextImg/home1.png",alt:"mei"}}),n("p",[t._v("每日推荐")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",[n("a",{attrs:{href:""}},[n("img",{attrs:{src:"http://pay.91yunshi.com/share/html/userTextImg/home1.png",alt:"mei"}}),n("p",[t._v("每日推荐")])])])}],c=n("1da1"),u=(n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newMV"},[n("div",{staticClass:"title"},[n("van-icon",{attrs:{name:"wap-nav"}}),t._v(" 最新MV ")],1),n("div",{staticClass:"mvContaint"},[n("ul",t._l(t.NewMvList,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.onClick(e.id,e.cover)}}},[n("img",{attrs:{src:e.cover,alt:""}}),n("van-icon",{attrs:{name:"play"}},[t._v(t._s(e.playCount)+"万")]),n("p",[t._v(t._s(e.artistName))])],1)})),0)])])}),l=[],d={name:"NewMv",created:function(){this.getNewMv()},data:function(){return{NewMvList:[]}},methods:{getNewMv:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("mv/first?limit=10");case 2:n=e.sent,a=n.data,200===a.code&&(t.NewMvList=a.data);case 5:case"end":return e.stop()}}),e)})))()},onClick:function(t,e){this.$router.push({path:"/transition_detail",query:{id:t,img:e,r:1080}})}}},f=d,h=(n("c3ee"),n("2877")),p=Object(h["a"])(f,u,l,!1,null,"01dfcf56",null),m=p.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newMusic"},[n("van-icon",{attrs:{name:"descending"}},[t._v(" 最新音乐 ")]),n("div",{staticClass:"list",staticStyle:{"margin-bottom":"30px"}},[n("ul",t._l(t.newMusicList,(function(e,a){return n("li",{key:a,staticClass:"first-child",on:{click:function(n){return t.toPlaymusic(e.id,e.picUrl)}}},[n("img",{attrs:{src:e.picUrl,alt:""}}),n("p",[t._v(t._s(e.name))])])})),0)]),n("h4",[t._v("hhhhhhhhh")])],1)},v=[],y={name:"NewMusic",data:function(){return{newMusicList:[]}},created:function(){this.getnewMusic()},methods:{getnewMusic:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/personalized/newsong");case 3:n=e.sent,a=n.data,200===a.code&&(t.newMusicList=a.result),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("errro");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},toPlaymusic:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.axios.get("/check/music?id="+t);case 2:if(r=a.sent,i=r.data,i.success){a.next=6;break}return a.abrupt("return",n.$toast("暂无版权"));case 6:n.$router.push({path:"/playmusic",query:{id:t,img:e}});case 7:case"end":return a.stop()}}),a)})))()}}},b=y,x=(n("85aa"),Object(h["a"])(b,g,v,!1,null,"8d93cd42",null)),k=x.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footor"},[n("van-tabbar",{attrs:{"active-color":"red",route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"like-o",replace:"",to:"/home"}},[t._v("发现")]),n("van-tabbar-item",{attrs:{icon:"fire-o",to:"/transition"}},[t._v("视频")]),n("van-tabbar-item",{attrs:{icon:"user-o",to:"/user"}},[t._v("我的")])],1)],1)},w=[],C={name:"Footer",data:function(){return{active:0}}},O=C,$=(n("c7cc"),Object(h["a"])(O,_,w,!1,null,"546fe25e",null)),L=$.exports,j={name:"Home",components:{NewMV:m,NewMusic:k,Footer:L},created:function(){this.getbanners(),this.getkey()},mounted:function(){},data:function(){return{value:"",banners:[],key:"",searchList:[],timmer:null,display:!1}},methods:{onSearch:function(t){var e;e=t?this.value:this.key,this.$router.push({path:"/search",query:{keyword:e}})},getbanners:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("banner");case 2:n=e.sent,a=n.data,200===a.code&&(t.banners=a.banners);case 5:case"end":return e.stop()}}),e)})))()},getkey:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("search/default");case 2:n=e.sent,a=n.data,200===a.code&&(t.key=a.data.showKeyword);case 5:case"end":return e.stop()}}),e)})))()},getSearch:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.axios.get(t,e);case 2:r=a.sent,i=r.data.result.songs,n.searchList=i;case 5:case"end":return a.stop()}}),a)})))()},onInput:function(t){var e=this;this.display=!0,clearTimeout(this.timmer),this.timmer=setTimeout((function(){e.getSearch("/search",{params:{keywords:t}})}),1e3)},toplay:function(t,e){this.$router.push({path:"/playmusic",query:{id:t,img:e}})},onClear:function(){this.display=!1}}},E=j,S=(n("28eb"),Object(h["a"])(E,s,o,!1,null,"dd1795fa",null)),M=S.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t._m(0),n("router-link",{attrs:{to:"/index/1"}},[n("div",{staticClass:"phone "},[t._v("手机登录")])]),n("router-link",{attrs:{to:"/index/2"}},[n("div",{staticClass:"phone "},[t._v("验证码登陆")])])],1)},I=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("div",{staticClass:"logopic"})])}],R={name:"Login"},q=R,T=(n("6820"),Object(h["a"])(q,P,I,!1,null,"62fa4eb4",null)),N=T.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[1==t.id?n("div",{staticClass:"part"},[n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{name:"phone",label:"用户名",placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1):n("div",{staticClass:"part"},[n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("van-field",{attrs:{type:"text",name:"code",label:"验证码",placeholder:"验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"red"}},[t._v("登陆")]),n("van-button",{attrs:{"native-type":"button"},on:{click:t.onClick}},[t._v("发送验证码")])],1)],1)],1)])},B=[],U=(n("e9c4"),{name:"Index",data:function(){return{id:this.$route.params.id,username:"",password:"",code:""}},methods:{onClick:function(){this.axios.get("captcha/sent?phone=13990822769")},onSubmit:function(t){var e=this;if(1==this.id)if(this.username)if(this.password){var n=this;this.axios.post("login/cellphone",{phone:n.username,password:n.password}).then((function(t){if(502===t.data.code)e.$toast("密码输入错误"),e.password="";else if(200===t.data.code){console.log(t.data.cookie);var n={token:t.data.token,id:t.data.account.id,cookie:t.data.cookie};localStorage.setItem("userinfo",JSON.stringify(n)),console.log(document.cookie),e.$router.push({path:"/home"})}}))}else this.$toast("请输入密码");else this.$toast("手机号不能为空");else this.username?this.code?(console.log(this.code),this.axios.post("/captcha/verify",{phone:this.username,captcha:this.code}).then((function(t){console.log(t),400===t.data.code?e.$toast("验证码错误"):200===t.data.code&&e.$router.push({path:"/home"})}))):this.$toast("请输入验证码"):this.$toast("手机号不能为空")}}}),D=U,A=(n("8f2a"),Object(h["a"])(D,W,B,!1,null,"a5ef5920",null)),V=A.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transition_detail"},[n("div",{staticClass:"back"},[n("van-icon",{attrs:{name:"arrow-left"},on:{click:t.back}})],1),n("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)},ended:function(e){return t.onPlayerEnded(e)},waiting:function(e){return t.onPlayerWaiting(e)},playing:function(e){return t.onPlayerPlaying(e)},loadeddata:function(e){return t.onPlayerLoadeddata(e)},timeupdate:function(e){return t.onPlayerTimeupdate(e)},canplay:function(e){return t.onPlayerCanplay(e)},canplaythrough:function(e){return t.onPlayerCanplaythrough(e)},statechanged:function(e){return t.playerStateChanged(e)},ready:t.playerReadied}})],1)},X=[],F={data:function(){return{playerOptions:{playbackRates:[.5,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""},{type:"rtmp/flv",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}},created:function(){this.getMovie()},methods:{onPlayerPlay:function(t){console.log("player play!",t)},onPlayerPause:function(t){console.log("player pause!",t)},onPlayerEnded:function(t){console.log(t)},onPlayerWaiting:function(t){console.log(t)},onPlayerPlaying:function(t){console.log(t)},onPlayerLoadeddata:function(t){console.log(t)},onPlayerTimeupdate:function(t){console.log(t)},onPlayerCanplay:function(t){console.log("player Canplay!",t)},onPlayerCanplaythrough:function(t){console.log("player Canplaythrough!",t)},playerStateChanged:function(t){console.log("player current update state",t)},playerReadied:function(t){console.log("example player 1 readied",t)},getMovie:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.$route.query.id),e.next=3,t.axios.get("/video/url?id=".concat(t.$route.query.id,"&r=1080"));case 3:n=e.sent,a=n.data.urls,t.playerOptions.sources[0].src=a[0].url,console.log(t.playerOptions.src);case 7:case"end":return e.stop()}}),e)})))()},back:function(){this.$router.go(-1)}}},J=F,H=(n("86a3"),Object(h["a"])(J,z,X,!1,null,"8adb4422",null)),K=H.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"transition"},[n("van-tabs",{attrs:{"swipe-threshold":""},on:{click:t.onClick},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.titleList,(function(e,a){return n("van-tab",{key:a,attrs:{title:e.name,name:e.id}},[n("ul",[n("van-pull-refresh",{on:{refresh:function(n){return t.onRefresh(e.id,t.offset)}},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{"finished-text":"没有更多了"},on:{load:function(n){return t.onLoad(e.id,t.offset,1)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.videoList,(function(e,a){return n("li",{key:a,staticClass:"imgcontaint",on:{click:function(n){return t.toDetail(e.data.vid,e.data.coverUrl)}}},[n("img",{attrs:{src:e.data.coverUrl,alt:""}}),n("p",[t._v(t._s(e.data.title))]),n("van-icon",{attrs:{name:"play"}})],1)})),0)],1)],1)])})),1),n("Footer")],1)},G=[],Q=n("2909"),Z=(n("99af"),{name:"Transiton",data:function(){return{active:1,titleList:[],videoList:[],uid:0,offset:0,refreshing:!1,loading:!1}},components:{Footer:L},created:function(){this.getTitleList()},methods:{getTitleList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("userinfo")).cookie,e.next=3,t.axios.get("/video/category/list?cookie"+n);case 3:a=e.sent,r=a.data.data,t.titleList=r,t.uid=t.titleList[t.active-1].id;case 7:case"end":return e.stop()}}),e)})))()},getVideoList:function(){var t=arguments,e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length<=0?void 0:t[0],r=JSON.parse(localStorage.getItem("userinfo")).cookie,!(t.length<2)){n.next=10;break}return n.next=5,e.axios.get("/video/group?id="+a+"&&cookie"+r);case 5:i=n.sent,s=i.data.datas,e.videoList=s,n.next=19;break;case 10:return o=t.length<=1?void 0:t[1],n.next=13,e.axios.get("/video/group?id="+a+"&&offset"+o+"&&cookie"+r);case 13:if(c=n.sent,u=c.data.datas,!(t.length<=2?void 0:t[2])){n.next=18;break}return e.videoList=[].concat(Object(Q["a"])(e.videoList),Object(Q["a"])(u)),n.abrupt("return");case 18:e.videoList=[].concat(Object(Q["a"])(u),Object(Q["a"])(e.videoList));case 19:case"end":return n.stop()}}),n)})))()},onClick:function(t){this.offset=0,this.getVideoList(t)},onRefresh:function(t,e){this.getVideoList(t,e),this.offset++,this.refreshing=!1},onLoad:function(t,e,n){this.getVideoList(t,e,n),this.offset++,this.loading=!1},toDetail:function(t,e){this.$router.push({path:"/transition_detail",query:{id:t,img:e}})}},computed:{}}),tt=Z,et=(n("867c"),Object(h["a"])(tt,Y,G,!1,null,"5b7e97d0",null)),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Playmusic"},[n("van-icon",{attrs:{name:"arrow-left"},on:{click:t.goBack}}),n("div",{staticClass:"background"},[n("img",{attrs:{id:"background",src:t.$route.query.img,alt:""}})]),n("div",{staticClass:"background layer"}),n("div",{staticClass:"top"},[n("img",{staticClass:"img Rotation puase",attrs:{id:"img",src:t.$route.query.img,alt:""}})]),n("div",{staticClass:"lyric"},[n("ul",{attrs:{id:"ulyric"}},t._l(t.ulyric,(function(e,a){return n("li",{key:a,class:[t.currentIndex==a?"red":""]},[n("p",[t._v(t._s(e.lyric4))])])})),0)]),n("div",{staticClass:"audio"},[n("audio",{attrs:{src:t.musicurl,controls:"",id:"song"}})]),t._m(0)],1)},rt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"jingdutiao"},[n("div",{staticClass:"tiao"})])}],it=(n("ac1f"),n("1276"),n("d81d"),n("d3b7"),n("159b"),{name:"Playmusic",data:function(){return{ulyric:[],musicurl:"",timeDiplay:0,currentIndex:0}},methods:{getLyric:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/lyric?id="+t.$route.query.id);case 2:n=e.sent,a=n.data.lrc.lyric,r=a.split("\n"),i=r.map((function(t){var e=t.split("]"),n=e.pop(),a=0;return e.forEach((function(t){var e=t.substr(1,t.length-1).split(":");a=60*e[0]+Math.floor(e[1])})),{times:a,lyric4:n}})),t.ulyric=i;case 7:case"end":return e.stop()}}),e)})))()},getmusicurl:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/song/url?id="+t.$route.query.id);case 2:n=e.sent,a=n.data.data,t.musicurl=a[0].url;case 5:case"end":return e.stop()}}),e)})))()},goBack:function(){this.$router.go(-1)}},created:function(){this.getLyric(),this.getmusicurl()},watch:{timeDiplay:function(t){var e=this;this.ulyric.forEach((function(t,n){e.timeDiplay===t.times&&(document.getElementById("ulyric").style.marginTop=32*-n+"px",e.currentIndex=n,console.log(n))}))}},mounted:function(){var t=this,e=document.getElementById("song");e.addEventListener("timeupdate",(function(){var e=Math.floor(this.currentTime);t.timeDiplay=e})),e.addEventListener("play",(function(){document.getElementById("img").classList.toggle("puase")})),e.addEventListener("pause",(function(){document.getElementById("img").classList.add("puase")}))}}),st=it,ot=(n("87e7"),Object(h["a"])(st,at,rt,!1,null,"060fc24b",null)),ct=ot.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("div",{staticClass:"back"},[n("van-icon",{attrs:{name:"arrow-left"},on:{click:t.back}})],1),n("div",{staticClass:"input"},[n("van-icon",{attrs:{name:"search"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],ref:"keydown",attrs:{type:"text"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value)},t.onChange]}})],1),n("div",{staticClass:"song"},[n("ul",t._l(t.searchList,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.toplay(e.id,e.artists[0].img1v1Url)}}},[t._v(t._s(e.name))])})),0)])])},lt=[],dt={data:function(){return{keywords:"",searchList:[],timmer:null}},created:function(){this.getSearch("/search",{params:{keywords:this.$route.query.keyword}})},mounted:function(){var t=this,e=this.$refs.keydown;e.addEventListener("keydown",(function(e){"Enter"===e.key&&t.getSearch("/search",{params:{keywords:t.keywords}})}))},methods:{getSearch:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.axios.get(t,e);case 2:r=a.sent,i=r.data.result.songs,n.searchList=i,console.log(n.searchList);case 6:case"end":return a.stop()}}),a)})))()},back:function(){this.$router.go(-1)},toplay:function(t,e){this.$router.push({path:"/playmusic",query:{id:t,img:e}})},onChange:function(t){var e=this;clearTimeout(this.timmer),setTimeout((function(){e.getSearch("/search",{params:{keywords:e.keywords}})}),1e3)}}},ft=dt,ht=(n("0790"),Object(h["a"])(ft,ut,lt,!1,null,"7d93aed9",null)),pt=ht.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["singer",t.currenindex?"haspadding":"",t.fullScreen?"overflow":""]},[n("ul",{staticClass:"list_containt"},t._l(t.songList,(function(e,a){return n("li",{key:a,staticClass:"list",on:{click:function(e){return t.giveindexlist(a)}}},[n("p",{staticClass:"index"},[t._v(t._s(a+1))]),n("div",{staticClass:"context"},[n("h3",{staticClass:"name"},[t._v(t._s(e.name))]),n("p",{staticClass:"songer"},[n("span",[t._v(t._s(e.ar))]),n("span",[t._v("-")]),n("span",[t._v(t._s(e.al.name))])])])])})),0),t.currenindex?n("div",[n("Audio")],1):t._e()])},gt=[],vt=n("5530"),yt=(n("b0c0"),n("a15b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audio"},[t.fullScreen?n("MiddAudio",{attrs:{progress:t.progress,value:t.playing,currentime:t.currentime,duration:t.duration,ulyric:t.ulyric},on:{changprogress:t.changprogress,input:t.changplaying,fangdou:t.fangdou,changlocathin:t.changlocathin}}):t._e(),t.fullScreen?t._e():n("MinAudio",{attrs:{progress:t.progress}}),n("audio",{attrs:{src:t.musicurl,id:"audio"}})],1)}),bt=[],xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Minaudio"},[n("div",{class:["img",t.playing?"playing":"playing puase"],on:{click:t.changfullscreen}},[n("img",{attrs:{src:t.currentsong.al.picUrl,alt:""}})]),n("div",{staticClass:"title"},[n("h3",{staticClass:"name"},[t._v(t._s(t.currentsong.name))]),n("p",[t._v(t._s(t.currentsong.ar))])]),n("div",{staticClass:"play"},[n("Circles",{attrs:{value:t.playing,progress:t.progress},on:{input:t.changplaying}})],1),t._m(0)])},kt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"liebiao"},[n("i",{staticClass:"iconfont icon-liebiao"})])}],_t=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"circle"},[n("canvas",{ref:"canvas",attrs:{width:"50px",height:"50px"}}),n("p",{class:["iconfont",t.value?"icon-zanting1":"icon-bofang1"],on:{click:t.changplay}})])}),wt=[],Ct={props:{value:Boolean,progress:Number},data:function(){return{ctx:{}}},mounted:function(){this.ctx=this.$refs.canvas.getContext("2d"),this.draw(this.ctx)},methods:{changplay:function(){this.$emit("input",!this.value)},draw:function(t){t.clearRect(0,0,50,50),t.save(),t.beginPath(),t.lineWidth=5,t.arc(25,25,17.5,Math.PI/180*-90,2*Math.PI+Math.PI/180*-90),t.strokeStyle="rgba(212,68,57,0.3)",t.stroke(),t.beginPath(),t.lineWidth=5,t.arc(25,25,17.5,Math.PI/180*-90,2*Math.PI*this.progress+Math.PI/180*-90),t.strokeStyle="rgba(212,68,57,1)",t.stroke(),t.restore()}},watch:{progress:function(){this.draw(this.ctx)}}},Ot=Ct,$t=(n("f1b7"),Object(h["a"])(Ot,_t,wt,!1,null,"29508cac",null)),Lt=$t.exports,jt=n("2f62"),Et={components:{Circles:Lt},props:{progress:Number},computed:Object(vt["a"])(Object(vt["a"])({},Object(jt["b"])({currentsong:"play/currentsong"})),Object(jt["c"])({playing:function(t){return t.play.playing}})),methods:{changplaying:function(t){this.$store.commit({type:"play/changplayaction",playing:t})},changfullscreen:function(){this.$store.commit({type:"play/changfullscreenaction"})}}},St=Et,Mt=(n("3cdd"),Object(h["a"])(St,xt,kt,!1,null,"c2e7fd54",null)),Pt=Mt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Middaudio"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.currentsong.al.picUrl,alt:""}})]),n("div",{staticClass:"layer img"}),n("div",{staticClass:"top"},[n("div",{staticClass:"left",on:{click:t.changfullscreen}},[n("van-icon",{attrs:{name:"arrow-left"}})],1),n("van-tabs",{attrs:{background:"none","title-active-color":"black",color:"black"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"歌曲"}},[n("div",{staticClass:"imgs"},[n("img",{attrs:{src:t.currentsong.al.picUrl,alt:""}})]),n("div",{staticClass:"midd"},[n("div",{staticClass:"name"},[n("h3",[t._v(t._s(t.currentsong.name))]),n("p",[t._v(t._s(t.currentsong.ar))])]),n("div",{staticClass:"like"},[n("van-icon",{attrs:{name:"like-o"}})],1)]),n("div",{staticClass:"progress"}),n("div",{staticClass:"option"},[n("div",{staticClass:"playmode"},[n("i",{class:["iconfont",t.playmodeclass],on:{click:t.changemode}})]),n("div",{staticClass:"last",on:{click:function(e){return t.changcurrenindex(-1)}}},[n("i",{staticClass:"iconfont  icon-shangyishoushangyige"})]),n("div",{staticClass:"play"},[n("i",{class:["iconfont",t.playing?"icon-zanting1":"icon-bofang1"],on:{click:t.changplay}})]),n("div",{staticClass:"next",on:{click:function(e){return t.changcurrenindex(1)}}},[n("i",{staticClass:"iconfont  icon-shangyishoushangyige1"})])])]),n("van-tab",{attrs:{title:"歌词"}},[n("div",{staticClass:"lyric"},[n("ul",{attrs:{id:"ulyric"}},t._l(t.ulyric,(function(e,a){return n("li",{key:a,class:[t.currentIndex==a?"red":""],on:{click:function(e){return t.changlocathin(a)}}},[n("p",[t._v(t._s(e.lyric4))])])})),0)])]),n("Bar",{attrs:{progress:t.progress,currentime:t.currentime,duration:t.duration},on:{changprogress:t.changprogress,fangdou:t.fangdou}})],1)],1)])},Rt=[],qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Bar"},[n("div",{staticClass:"text"},[t._v(t._s(t._f("time")(t.currentime)))]),t._m(0),n("div",{staticClass:"text"},[t._v(t._s(t._f("time")(t.duration)))])])},Tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bar",attrs:{id:"bar"}},[n("span",{staticClass:"botten",attrs:{id:"botten"}})])}],Nt={props:{progress:Number,currentime:Number,duration:Number},filters:{time:function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return e=e>9?e:"0"+e,n=n>9?n:"0"+n,e+":"+n}},mounted:function(){var t=this;this.botten=document.getElementById("botten"),this.bar=document.getElementById("bar"),this.botten.addEventListener("touchstart",(function(e){t.fangdou();var n,a=t.progress*t.bar.offsetWidth,r=e.changedTouches[0].clientX,i=function(e){n=e.changedTouches[0].clientX-r+a,n<0&&(n=0),n>t.bar.offsetWidth&&(n=t.bar.offsetWidth-t.botten.offsetWidth),t.botten.style.transform="translateX("+n+"px)",t.bar.style.backgroundImage="linear-gradient(to right, red "+n/t.bar.offsetWidth*100+"%, yellow "+n/t.bar.offsetWidth*100+"%)";var i=n/t.bar.offsetWidth;t.changprogress(i,!0)},s=function e(){var a=n/t.bar.offsetWidth;t.changprogress(a,!1),t.botten.removeEventListener("touchmove",i),t.botten.removeEventListener("touchend",e)};t.botten.addEventListener("touchmove",i),t.botten.addEventListener("touchend",s)})),this.bar.addEventListener("click",(function(e){console.log(t.bar.offsetLeft);var n=e.clientX+t.bar.offsetLeft-19,a=n/t.bar.offsetWidth;t.changprogress(a),t.botten.style.transform="translateX("+n+"px)",t.bar.style.backgroundImage="linear-gradient(to right, red "+n/t.bar.offsetWidth*100+"%, yellow "+n/t.bar.offsetWidth*100+"%)"}))},watch:{progress:function(){this.botten.style.transform="translateX("+this.progress*this.bar.offsetWidth+"px)",this.bar.style.backgroundImage="linear-gradient(to right, red "+this.progress*this.bar.offsetWidth/this.bar.offsetWidth*100+"%, yellow "+this.progress*this.bar.offsetWidth/this.bar.offsetWidth*100+"%)"}},methods:{changprogress:function(t,e){this.$emit("changprogress",t,e)},fangdou:function(){this.$emit("fangdou")}}},Wt=Nt,Bt=(n("5578"),Object(h["a"])(Wt,qt,Tt,!1,null,"7b2a9a2a",null)),Ut=Bt.exports,Dt={components:{Bar:Ut},props:{progress:Number,value:Boolean,currentime:Number,duration:Number,ulyric:Array},data:function(){return{active:0,currentIndex:0}},created:function(){console.log(this.ulyric)},computed:Object(vt["a"])(Object(vt["a"])(Object(vt["a"])({},Object(jt["b"])({currentsong:"play/currentsong"})),Object(jt["c"])({playing:function(t){return t.play.playing},mode:function(t){return t.play.mode}})),{},{playmodeclass:function(){switch(this.mode){case 0:return"icon-shunxubofang";case 1:return"icon-icon_luyinbofang_suijibofang";case 2:return"icon-icon_danqubofang"}}}),methods:{changfullscreen:function(){this.$store.commit({type:"play/changfullscreenaction"})},changprogress:function(t,e){this.$emit("changprogress",t,e)},changplay:function(){this.$emit("input",!this.value)},fangdou:function(){this.$emit("fangdou")},changemode:function(){this.$store.commit({type:"play/changemode"})},changcurrenindex:function(t){this.$store.commit({type:"play/changcurrenindex",code:t})},changlocathin:function(t){this.$emit("changlocathin",t)}},watch:{currentime:function(t){var e=this;null!==document.getElementById("ulyric")&&this.$nextTick((function(){var t=Math.floor(e.currentime);e.ulyric.forEach((function(n,a){t===n.times&&(document.getElementById("ulyric").style.transform="translateY("+30*-a+"px)",e.currentIndex=a)}))}))}}},At=Dt,Vt=(n("bc2f"),Object(h["a"])(At,It,Rt,!1,null,"407aa086",null)),zt=Vt.exports,Xt={name:"Audio",components:{MinAudio:Pt,MiddAudio:zt},data:function(){return{musicurl:"",currentime:0,duration:0,ulyric:[]}},created:function(){this.getmusicurl(this.id),this.getLyric(this.id)},mounted:function(){var t=this;this.audio=document.getElementById("audio"),this.audio.addEventListener("canplay",(function(){t.duration=t.audio.duration,t.playing?t.audio.play():t.audio.pause()})),this.audio.addEventListener("timeupdate",this.timeupdate),this.audio.addEventListener("ended",(function(){t.Index.changcurrenindex(t,1)}))},methods:{getmusicurl:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.axios.get("/song/url?id="+t);case 3:a=n.sent,r=a.data.data,e.musicurl=r[0].url,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getLyric:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.axios.get("/lyric?id="+t);case 2:a=n.sent,r=a.data.lrc.lyric,i=r.split("\n"),s=i.map((function(t){var e=t.split("]"),n=e.pop(),a=0;return e.forEach((function(t){var e=t.substr(1,t.length-1).split(":");a=60*e[0]+Math.floor(e[1])})),{times:a,lyric4:n}})),e.ulyric=s;case 7:case"end":return n.stop()}}),n)})))()},timeupdate:function(){this.currentime=this.audio.currentTime,console.log("ontimeupdata")},changplaying:function(t){this.$store.commit({type:"play/changplayaction",playing:t})},fangdou:function(){this.audio.removeEventListener("timeupdate",this.timeupdate)},changprogress:function(t,e){this.currentime=t*this.duration,e||(this.audio.currentTime=this.currentime,this.audio.addEventListener("timeupdate",this.timeupdate))},changlocathin:function(t){this.audio.currentTime=this.ulyric[t].times}},computed:Object(vt["a"])(Object(vt["a"])(Object(vt["a"])({},Object(jt["b"])({currentsong:"play/currentsong"})),Object(jt["c"])({playing:function(t){return t.play.playing},currenindex:function(t){return t.play.currenindex},fullScreen:function(t){return t.play.fullScreen}})),{},{id:function(){return this.currentsong.id},progress:function(){return this.duration?Math.floor(this.currentime/this.duration*1e3)/1e3:0}}),watch:{playing:function(t){!0===t?this.audio.play():this.audio.pause()},id:function(t){this.audio.load(),this.getmusicurl(t),this.getLyric(t),this.audio.load()}}},Ft=Xt,Jt=Object(h["a"])(Ft,yt,bt,!1,null,null,null),Ht=Jt.exports,Kt={name:"Singer",components:{Audio:Ht},data:function(){return{songList:[]}},created:function(){this.getSongList()},methods:{getSongList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/artists?id=6452");case 3:n=e.sent,a=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:t.songList=a.hotSongs.map((function(t){return{id:t.id,name:t.name,ar:t.ar.map((function(t){return t.name})).join("/"),al:{name:t.al.name,picUrl:t.al.picUrl}}}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},giveindexlist:function(t){this.$store.commit({type:"play/getindexlist",index:t,songList:this.songList})}},computed:Object(vt["a"])({},Object(jt["c"])({playing:function(t){return t.play.playing},currenindex:function(t){return t.play.currenindex>=0},fullScreen:function(t){return t.play.fullScreen}}))},Yt=Kt,Gt=(n("db97"),Object(h["a"])(Yt,mt,gt,!1,null,"2c29a95f",null)),Qt=Gt.exports;a["a"].use(i["a"]);var Zt=[{path:"/",redirect:"login"},{path:"/home",name:"Home",component:M},{path:"/login",name:"Login",component:N},{path:"/index/:id",name:"Index",component:V},{path:"/transition_detail",name:"Transition_detail",component:K},{path:"/transition",name:"Transiton",component:nt},{path:"/playmusic",name:"Playmusic",component:ct},{path:"/search",name:"Search",component:pt},{path:"/singer",name:"Singer",component:Qt}],te=new i["a"]({routes:Zt}),ee=te,ne=(n("caad"),n("c740"),{namespaced:!0,state:{fullScreen:!1,playing:!1,playlist:[],sequencelist:[],mode:0,currenindex:-1},getters:{currentsong:function(t){return t.currenindex<0||t.currenindex>t.playing.lenght?{}:t.playlist[t.currenindex]}},mutations:{getindexlist:function(t,e){switch(t.sequencelist=Object(Q["a"])(e.songList),t.currenindex=e.index,t.mode){case 0:t.playlist=t.sequencelist,console.log(t.sequencelist);break;case 1:for(var n=[],a=t.sequencelist.length+1;a>0;){a--;var r=Math.floor(Math.random()*t.sequencelist.length);if(n.includes(t.sequencelist[r])){if(n.length===t.sequencelist.length)break;a++}else n.push(t.sequencelist[r])}t.playlist=n,console.log(n);break;default:t.playlist=t.sequencelist}},changemode:function(t){var e=t.playlist[t.currenindex].id;switch(console.log(e),t.mode=(t.mode+1)%3,t.mode){case 0:t.playlist=t.sequencelist,console.log(t.sequencelist);break;case 1:for(var n=[],a=t.sequencelist.length+1;a>0;){a--;var r=Math.floor(Math.random()*t.sequencelist.length);if(n.includes(t.sequencelist[r])){if(n.length===t.sequencelist.length)break;a++}else n.push(t.sequencelist[r])}t.playlist=n,console.log(n);break;default:t.playlist=t.sequencelist}t.currenindex=t.playlist.findIndex((function(t){return t.id===e}))},changplayaction:function(t,e){t.playing=e.playing},changcurrenindex:function(t,e){t.currenindex+e.code<0?t.currenindex=0:t.currenindex+e.code>t.sequencelist.length-1?t.currenindex=t.playlist.length-1:(console.log(t.sequencelist.length),t.currenindex+=e.code,console.log(t.currenindex))},changfullscreenaction:function(t){t.fullScreen=!t.fullScreen}},action:{}});a["a"].use(jt["a"]);var ae=new jt["a"].Store({modules:{play:ne}}),re=n("343b"),ie=n("b970"),se=(n("157a"),n("bc3a")),oe=n.n(se),ce=n("d6d3"),ue=n.n(ce),le=(n("451f"),n("fda2"),n("3394"),{changcurrenindex:function(t,e){console.log(this),t.$store.commit({type:"play/changcurrenindex",code:e})}});a["a"].use(ue.a),a["a"].use(re["a"]),console.log(r["default"]),a["a"].prototype.axios=oe.a.create({baseURL:"http://localhost:8888"}),a["a"].prototype.Index=le,a["a"].use(ie["a"]),a["a"].config.productionTip=!1;var de=a["a"].component("my-component-name",{create:function(){console.log(this)}});console.log(de),console.log(ee),ee.beforeEach((function(t,e,n){var a=localStorage.getItem("userinfo");a?n():n({path:"/login"}),"/login"===t.fullPath&&(a?n({path:"/home"}):n())})),console.log(ee),console.log(new a["a"]({router:ee,store:ae,render:function(t){return t(r["default"])}}).$mount("#app"))},5766:function(t,e,n){},6777:function(t,e,n){},6820:function(t,e,n){"use strict";n("755e")},7161:function(t,e,n){},"72db":function(t,e,n){},"755e":function(t,e,n){},"7c55":function(t,e,n){"use strict";n("2395")},"85aa":function(t,e,n){"use strict";n("72db")},"867c":function(t,e,n){"use strict";n("e768")},"86a3":function(t,e,n){"use strict";n("3b35")},"87e7":function(t,e,n){"use strict";n("a7dc")},"8f2a":function(t,e,n){"use strict";n("7161")},"9d8d":function(t,e,n){},a357:function(t,e,n){},a7dc:function(t,e,n){},bc2f:function(t,e,n){"use strict";n("5766")},c3ee:function(t,e,n){"use strict";n("9d8d")},c7cc:function(t,e,n){"use strict";n("d5c8")},d5c8:function(t,e,n){},d968:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[]},db97:function(t,e,n){"use strict";n("03ab")},ded1:function(t,e,n){},e768:function(t,e,n){},f1b7:function(t,e,n){"use strict";n("01e6")}});
//# sourceMappingURL=app.f1767579.js.map